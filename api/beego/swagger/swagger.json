{
    "swagger": "2.0",
    "info": {
        "title": "Trusted Execution Environment API",
        "description": "swagger has a very cool tools to autogenerate documents for your API",
        "version": "1.0.0",
        "contact": {}
    },
    "basePath": "/v1",
    "paths": {
        "/task/": {
            "get": {
                "tags": [
                    "task"
                ],
                "description": "get all the tee task",
                "operationId": "TeeTaskController.GetAll",
                "responses": {
                    "200": {
                        "description": "",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/tee.Task"
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "task"
                ],
                "description": "Execute the tee task with algorithm",
                "operationId": "TeeTaskController.Execute",
                "parameters": [
                    {
                        "in": "formData",
                        "name": "task_id",
                        "description": "Task id for tee task. It is generated by the server after the task is created.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "algorithm_file",
                        "description": "The algorithm executable to perform this task.",
                        "required": true,
                        "type": "file"
                    },
                    {
                        "in": "formData",
                        "name": "executor",
                        "description": "The executor is the public key that performs this trusted execution task.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "container_type",
                        "description": "The choice of trusted execution environment, 0-docker 1-subdocker, default is 0.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "hash",
                        "description": "All parameters except the signature are sequentially connected to obtain a hash.",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "signatures",
                        "description": "Signature of the data summary by the user's private key.",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "string Successful execution"
                    }
                }
            },
            "post": {
                "tags": [
                    "task"
                ],
                "description": "Create a tee task to calculate the data, the task creator should provide all the data ID and algorithm ID, and the location where the result is stored",
                "operationId": "TeeTaskController.Create",
                "parameters": [
                    {
                        "in": "formData",
                        "name": "data_id[]",
                        "description": "All shared data IDs, this shared data stores the raw data address.",
                        "required": true,
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    {
                        "in": "formData",
                        "name": "algorithm_id",
                        "description": "Shared algorithm data ID.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "result_address",
                        "description": "The result of the trusted calculation is the address.",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "{string} tee.SharedData.ID"
                    }
                }
            }
        },
        "/task/{id}": {
            "get": {
                "tags": [
                    "task"
                ],
                "description": "Get a tee task by task id",
                "operationId": "TeeTaskController.Get",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "Task id for tee task. It is generated by the server after the task is created.",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "schema": {
                            "$ref": "#/definitions/tee.Task"
                        }
                    }
                }
            }
        },
        "/tee/": {
            "get": {
                "tags": [
                    "tee"
                ],
                "description": "owner can get all the shared data they upload",
                "operationId": "SharedDataController.GetAll",
                "parameters": [
                    {
                        "in": "query",
                        "name": "owner",
                        "description": "Data owner for user shared data. Generally use owner public key.",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/tee.SharedData"
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "tee"
                ],
                "description": "Upload used to upload shared data for users. After the data is uploaded, once someone else requests to query this data,",
                "operationId": "SharedDataController.Upload",
                "parameters": [
                    {
                        "in": "formData",
                        "name": "ciphertext",
                        "description": "Encrypted ciphertext used to share data, usually encrypted with a private key. Of course, you can also not encrypt, upload data plaintext, such as data addresses.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "summary",
                        "description": "A summary of the data shared by the user. It is generally calculated using SM3/SHA-256/MD5. SM3 encryption is currently recommended.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "description",
                        "description": "A data description of the user's shared data. Often used to explain the basics of data or what it can be used for.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "owner",
                        "description": "Data owner for user shared data. Generally use owner public key.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "hash",
                        "description": "All parameters except the signature are sequentially connected to obtain a hash.",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "signatures",
                        "description": "Signature of the data summary by the user's private key.",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "{string} tee.SharedData.ID"
                    }
                }
            }
        },
        "/tee/authorize/": {
            "put": {
                "tags": [
                    "tee"
                ],
                "description": "Authorize whether the license agrees to this user to view this data",
                "operationId": "SharedDataController.Authorize",
                "parameters": [
                    {
                        "in": "formData",
                        "name": "id",
                        "description": "The ID of the notification, used for authorization or refusal.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "status",
                        "description": "Authorization result. 0 - Unauthorized, 1 - Agree to authorize, 2 - Deny authorization.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "message",
                        "description": "If the status is authorized, the message is the encrypted ciphertext, and if it is refused, the message is refused reason.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "dataStoreType",
                        "description": "The DataStoreType is used to describe the type of data storage for authorization. 0-local 1-azure",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "encryptedKey",
                        "description": "EncryptedKey is the ciphertext after the symmetric key is encrypted with the public key.",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "encryptedType",
                        "description": "EncryptedType for tee shared data. 0-unencrypted, 1-addressOnly, 2-dataOnly, 3-all.",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "hash",
                        "description": "All parameters except the signature are sequentially connected to obtain a hash.",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "signatures",
                        "description": "Signature of the data summary by the user's private key.",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "{string} Authorized successfully"
                    }
                }
            }
        },
        "/tee/history/{id}": {
            "get": {
                "tags": [
                    "tee"
                ],
                "description": "Request to view user data history version",
                "operationId": "SharedDataController.GetHistory",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "Data id for user shared data. It is generated by the server after the data is uploaded.",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "{string} GetHistory successfully"
                    }
                }
            }
        },
        "/tee/notification/": {
            "get": {
                "tags": [
                    "tee"
                ],
                "description": "Query all notifications you receive as data owners and authorize or reject requests",
                "operationId": "SharedDataController.GetAllNotificaitons",
                "parameters": [
                    {
                        "in": "query",
                        "name": "owner",
                        "description": "Data owner for user shared data. Generally use owner public key.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "query",
                        "name": "id",
                        "description": "Data id for user shared data. It is generated by the server after the data is uploaded.",
                        "type": "string"
                    },
                    {
                        "in": "query",
                        "name": "requester",
                        "description": "A data requester requesting to view data shared by others. The requester public key is generally used.",
                        "type": "string"
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "description": "Authorization result. 0 - Unauthorized, 1 - Agree to authorize, 2 - Deny authorization.",
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/tee.Notification"
                            }
                        }
                    }
                }
            }
        },
        "/tee/request/": {
            "get": {
                "tags": [
                    "tee"
                ],
                "description": "Query all requests you send as a requester and view the authorization information for your requests.",
                "operationId": "SharedDataController.GetAllRequest",
                "parameters": [
                    {
                        "in": "query",
                        "name": "requester",
                        "description": "A data requester requesting to view data shared by others. The requester public key is generally used.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "query",
                        "name": "id",
                        "description": "Data id for user shared data. It is generated by the server after the data is uploaded.",
                        "type": "string"
                    },
                    {
                        "in": "query",
                        "name": "status",
                        "description": "Authorization result. 0 - Unauthorized, 1 - Agree to authorize, 2 - Deny authorization.",
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/tee.Notification"
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "tee"
                ],
                "description": "Request to view user data, this will send a notification to the data owner and will receive a reminder.",
                "operationId": "SharedDataController.Request",
                "parameters": [
                    {
                        "in": "formData",
                        "name": "id",
                        "description": "Data id for user shared data. It is generated by the server after the data is uploaded.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "requester",
                        "description": "A data requester requesting to view data shared by others. The requester public key is generally used.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "hash",
                        "description": "All parameters except the signature are sequentially connected to obtain a hash.",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "signatures",
                        "description": "Signature of the data summary by the user's private key.",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "{string} Requested successfully"
                    }
                }
            }
        },
        "/tee/{id}": {
            "get": {
                "tags": [
                    "tee"
                ],
                "description": "users can get shared data with the specified id",
                "operationId": "SharedDataController.Get",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "Data id for user shared data. It is generated by the server after the data is uploaded.",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "schema": {
                            "$ref": "#/definitions/tee.SharedData"
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "tee"
                ],
                "description": "update the uploaded data, regenerate the data summary, and modify the data description",
                "operationId": "SharedDataController.Update",
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "Data id for user shared data. It is generated by the server after the data is uploaded.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "ciphertext",
                        "description": "Encrypted ciphertext for user shared data. Generally use private key encryption.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "summary",
                        "description": "Data summary for user to share data. Generally use SHA-256/MD5 calculation.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "description",
                        "description": "Data description for user to share data. Generally used to explain data usage.",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "hash",
                        "description": "All parameters except the signature are sequentially connected to obtain a hash.",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "signatures",
                        "description": "Signature of the data summary by the user's private key.",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "string\tUpdated successfully"
                    }
                }
            }
        }
    },
    "definitions": {
        "tee.Notification": {
            "title": "Notification",
            "type": "object"
        },
        "tee.SharedData": {
            "title": "SharedData",
            "type": "object"
        },
        "tee.Task": {
            "title": "Task",
            "type": "object"
        }
    },
    "tags": [
        {
            "name": "tee",
            "description": "SharedDataController for sharing data uploads, updates, requests, authorizations, and various queries\n"
        },
        {
            "name": "task",
            "description": "TeeTaskController for tee task creates, executes, and various queries\n"
        }
    ]
}